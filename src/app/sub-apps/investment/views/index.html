{% extends 'layout-investment.html' %}

{% set pageName='Investment Homepage' %}

{% from 'macros/dates.html' import financialYear %}
{% from './macros/fdi-overview.html' import fdiOverview %}

{% block page_content %}

	<h1 class="page-heading">
		Investment performance
	</h1>

	{% include 'partials/year-selector.html' %}

	<h2 class="page-financial-year">{{ selectedYear }} to {{ selectedYear + 1 }} financial year</h2>

	<h3 class="fdi-overview-heading">Overall performance</h3>
	<h4 class="fdi-overview-date">{{ financialYear( dateRange ) }}</h4>

	{{ fdiOverview( overview ) }}

	{% macro yoyTable( items, modifyer ) %}

		<table class="fdi-overview-yoy-table{% if modifyer %} fdi-overview-yoy-table--{{ modifyer }}{% endif %}">
			<thead>
				<tr>
					<th class="fdi-overview-yoy-table_heading">Year</th>
					<th class="fdi-overview-yoy-table_heading fdi-overview-yoy-table_heading--projects">Number of<br>projects</th>
					<th class="fdi-overview-yoy-table_heading">New jobs</th>
					<th class="fdi-overview-yoy-table_heading">Safeguarded<br>new jobs</th>
					<th class="fdi-overview-yoy-table_heading">CAPEX</th>
				</tr>
			</thead>
			<tbody>
				{% for item in items %}

				{%- if loop.index == 1  %}
					{% set additionalClass = ' fdi-overview-yoy-table_cell--current-year' %}
				{% else %}
					{% set additionalClass = '' %}
				{% endif -%}

				<tr class="fdi-overview-yoy-table_row">
					<td class="fdi-overview-yoy-table_cell{{ additionalClass }}">{{ item.year }}</td>
					<td class="fdi-overview-yoy-table_cell fdi-overview-yoy-table_cell--projects{{ additionalClass }}">{{ item.projects }}</td>
					<td class="fdi-overview-yoy-table_cell{{ additionalClass }}">{{ item.jobs.new }}</td>
					<td class="fdi-overview-yoy-table_cell{{ additionalClass }}">{{ item.jobs.safe }}</td>
					<td class="fdi-overview-yoy-table_cell{{ additionalClass }}">{{ item.capex | largeNumber }}</td>
				</tr>
				{% endfor %}
			</tbody>
		</table>
	{% endmacro %}

	<section class="grid-row">
		<div class="column-single">
			<h3 class="visually-hidden">Year on Year performance</h3>
			<h4 class="fdi-overview-yoy-date">{{ financialYear( overviewYoy.date_range ) }}</h4>

			<ul class="fdi-overview-yoy-list">
				<li class="fdi-overview-yoy-list_item">
					<h4 class="fdi-overview-yoy-list_heading fdi-overview-yoy-list_heading--high">High</h4>
					{{ yoyTable( overviewYoy.results.high ) }}
				</li>
				<li class="fdi-overview-yoy-list_item">
					<h4 class="fdi-overview-yoy-list_heading">Good</h4>
					{{ yoyTable( overviewYoy.results.good, 'no-year' ) }}
				</li>
				<li class="fdi-overview-yoy-list_item">
					<h4 class="fdi-overview-yoy-list_heading">Standard</h4>
					{{ yoyTable( overviewYoy.results.standard, 'no-year' ) }}
				</li>
			</ul>
		</div>
	</section>

	<section class="grid-row i-homepage-lists">
		<div class="column-one-third">

			{% if showSectorTeams %}

			<h3 class="i-homepage-lists_heading">
				{#<a href="{{ urls.investment.sectorTeams() }}">#}Sector Teams{#</a>#}
			</h3>

			<ul class="i-homepage-list">
			{% for team in sectorTeams.results %}
				<li class="i-homepage-list_item">
					<a href="{{ urls.investment.sectorTeam( team.id ) }}">{{ team.description }}</a>
				</li>
			{% endfor %}
			</ul>

			{% endif %}
		</div>
		<div class="column-one-third">
		{#

			<h3><a href="{{ urls.investment.osRegions() }}">Overseas Regions</a></h3>

			<ul>
			{% for region in overseasRegions.results %}
				<li>
					<a href="{{ urls.investment.osRegion( region.id ) }}">{{ region.name }}</a>
				</li>
			{% endfor %}
			</ul>
		#}
		</div>
		<div class="column-one-third"></div>
	</section>

{% endblock %}
