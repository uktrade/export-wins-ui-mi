{% extends 'layout-investment.html' %}

{% set pageName='Investment Homepage' %}

{% from 'macros/dates.html' import financialYear %}
{% from 'macros/pie-charts.html' import fdiStagePieChart, fdiHvcPieChart %}
{% from 'macros/page-heading.html' import pageHeading %}
{% from './macros/headline-figures.html' import headlineFigure, headlineSubFigure, headlineBreakdown %}
{% from './macros/table-data.html' import dataTable %}

{% block page_heading %}
	{{ pageHeading( 'Investment performance' ) }}
{% endblock %}

{% block page_content %}

	<h2 class="fdi-overview-heading">Headlines</h2>
	<h3 class="fdi-overview-sub-heading">On <span class="fdi-page-date_emphasize">{{ null | dateOnly }}</span> at {{ null | timeOnly }} releated to <span class="fdi-page-date_emphasize">financial year {{ selectedYear }}/{{ ( selectedYear - 2000 ) + 1  }}</span></h3>

	<section class="grid-row fdi-section">

		<div class="column-one-quarter fdi-section-row">

			{{ headlineFigure( 'Project wins', 'Total', headlines.wins.total | largeNumber ) }}

			{{ headlineBreakdown( [
				[ 'High', headlines.wins.percentage.high + '%' ],
				[ 'Good', headlines.wins.percentage.good + '%' ],
				[ 'Standard', headlines.wins.percentage.standard + '%' ]
			] ) }}

		</div>
		<div class="column-one-quarter fdi-section-row">

			{{ fdiHvcPieChart(
				'Non-HVC', headlines.breakdown.type.nonHvc,
				'HVC', headlines.breakdown.type.hvc
			) }}

			{{ fdiStagePieChart(
				'Verify win', headlines.breakdown.stage.verify,
				'Won', headlines.breakdown.stage.won,
				'perf-stage'
			) }}

		</div>
		<div class="column-one-quarter fdi-section-row">

			{{ headlineSubFigure( 'Jobs', 'Total', headlines.jobs.total | largeNumber ) }}

			{{ headlineBreakdown( [
				[ 'New jobs', headlines.jobs.new | largeNumber ],
				[ 'Safeguarded jobs', headlines.jobs.safeguarded | largeNumber ]
			], 'jobs' ) }}

		</div>
		<div class="column-one-quarter">

			{{ headlineSubFigure( 'Pipeline', 'Active', headlines.pipeline.total | largeNumber ) }}

			{{ headlineBreakdown( [
				[ 'High', headlines.pipeline.percentage.high + '%' ],
				[ 'Good', headlines.pipeline.percentage.good + '%' ],
				[ 'Standard', headlines.pipeline.percentage.standard + '%' ]
			] )}}
		</div>
	</section>

	<section class="grid-row fdi-section">
		<div class="column-single">

			<h2 class="fdi-overview-heading">Investment wins</h2>
			<p class="fdi-overview-sub-heading">Verified won in all of the department</p>

			{{ dataTable( 'fdi-wins', details.wins ) }}
		</div>
	</section>

	<h2 class="fdi-overview-heading">Investment pipeline</h2>
	<p class="fdi-overview-sub-heading">Active in all of the department</p>
	<section class="grid-row">
		<div class="column-three-quarters">

			{{ dataTable( 'fdi-active-pipeline', details.activePipeline ) }}

		</div>
		<div class="column-one-quarter">

			<div class="fdi-pipeline-projects">
				<h3 class="fdi-pipeline-projects-heading">All pipeline projects</h3>

				{% macro projectDetail( name, value1, value2 ) %}
					<dl class="fdi-pipeline-projects-list_detail">
						<dt class="fdi-pipeline-projects-list_detail_term">{{ name }}</dt>
						<dd class="fdi-pipeline-projects-list_detail_value">{{ value1 }}</dd>
						<dd class="fdi-pipeline-projects-list_detail_value">{{ value2 }}%</dd>
					</dl>
				{% endmacro %}

				<ol class="fdi-pipeline-projects-list">
					<li class="fdi-pipeline-projects-list_item">
						<span class="position-marker" data-number="1"></span>
						{{ projectDetail(
							'Prospect',
							details.pipeline.prospect.count,
							details.pipeline.prospect.percent
						) }}
					</li>
					<li class="fdi-pipeline-projects-list_item">
						<span class="position-marker" data-number="2"></span>
						{{ projectDetail(
							'Assign PM',
							details.pipeline.assign.count,
							details.pipeline.assign.percent
						) }}
					</li>
					<li class="fdi-pipeline-projects-list_item">
						<span class="position-marker" data-number="3"></span>
						{{ projectDetail(
							'Active',
							details.pipeline.active.count,
							details.pipeline.active.percent
						) }}
					</li>
				</ol>
			</div>
		</div>
	</section>
{#
	<section class="grid-row i-homepage-lists">
		<div class="column-one-third">

			{%- if showSectorTeams -%}

			<h3 class="i-homepage-lists_heading">
				<a href="{{ urls.investment.sectorTeams() }}">Sector Teams</a>
			</h3>

			<ul class="i-homepage-list">
			{%- for team in sectorTeams.results %}
				<li class="i-homepage-list_item">
					<a href="{{ urls.investment.sectorTeam( team.id ) }}">{{ team.description }}</a>
				</li>
			{% endfor %}
			</ul>

			{%- endif %}
		</div>
		<div class="column-one-third">

			{%- if showOverseasRegions -%}

			<h3><a href="{{ urls.investment.osRegions() }}">Overseas Regions</a></h3>

			<ul class="i-homepage-list">
			{%- for region in overseasRegions.results %}
				<li class="i-homepage-list_item">
					<a href="{{ urls.investment.osRegion( region.id ) }}">{{ region.name }}</a>
				</li>
			{% endfor %}
			</ul>

			{%- endif %}
		</div>
		<div class="column-one-third">

			{%- if showUkRegions -%}

			<h3><a href="{{ urls.investment.ukRegions() }}">UK Nations and Regions</a></h3>

			<ul class="i-homepage-list">
			{%- for group in ukRegions.results.region_groups %}
			{%- for region in group.regions %}
				<li class="i-homepage-list_item">
					<a href="{{ urls.investment.ukRegion( region.id ) }}">{{ region.name }}</a>
				</li>
			{% endfor %}
			{% endfor %}
			</ul>

			{%- endif %}
		</div>
	</section>
#}
{% endblock %}
